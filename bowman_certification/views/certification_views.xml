<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data noupdate="0">

    <record id="view_certification_service_form" model="ir.ui.view">
      <field name="name">certification.service.form</field>
      <field name="model">certification.service</field>
      <!-- <field name="groups_id" eval="[(6, 0, [ref('')])]"/> -->
      <field name="arch" type="xml">
	<form>
	  <header>
	    <field name="state" widget="statusbar" nolabel="1" statusbar_visible="draft,working_on,done" readonly="1"/>
	    <button type="object" name="action_start" string="Start" colspan="4" class="oe_highlight" attrs="{'invisible' : [('state','in',['working_on','done'])]}"/>
	    <button type="object" name="action_finish" string="Finish" colspan="4" class="oe_highlight" attrs="{'invisible' : [('state','in',['draft','done'])]}"/>
	    <button type="object" name="action_start" string="Re-Open" colspan="4" class="oe_highlight" attrs="{'invisible' : [('state','in',['draft','working_on'])]}"/>
	  </header>
	  <sheet>
            <div>
              <h1 class="mt0">
                <field name="name" class="oe_inline"/>
              </h1>
            </div>
            <group>
              <group name="group_certification_service_left">
		<field name="product_id"/>
		<field name="lot_id"/>
		<field name="move_line_id"/>
		<field name="group_id"/>
              </group>
              <group name="group_certification_service_right">
		<field name="date_received"/>
		<field name="date_calibration"/>
		<field name="is_pass"/>
	      </group>
            </group>

	    <notebook name="notebook_certification_service">
	      <page name="page_reading" string="Readings">
		<group>
		  <group name="element">
		    <field name="element_id"/>
		  </group>
		  <group name="standard" string="In House Standards">
		    <field nolabel="1" name="standard_ids"/>
		  </group>
		</group>
		<group string="Readings" name="reading">
		  <field nolabel="1" name="reading_ids" context="{'default_service_id': active_id, 'default_element_id': element_id}" string="Readings">
		    <tree string="Certification Readings" editable="top">
		      <field name="sequence" widget="handle"/>
		      <field name="reading"/>
		      <field name="description"/>
		      <field name="element_id"/>
		      <field name="density"/>
		    </tree>
		  </field>
		  <button type="object" name="action_compute_result" string="Compute Results" colspan="4" class="oe_highlight" />
		</group>
		<group string="Results" name="result">
		  <field name="result_ids" nolabel="1" string="Reading Results">
		    <tree string="Certification Results" editable="top">
		      <field name="element_id"/>
		      <field name="average"/>
		      <field name="diff_from_label"/>
		      <field name="percent_diff_from_label" widget="percentpie"/>
		      <field name="state"/>
		    </tree>
		  </field>
		</group>
	      </page>
	    </notebook>

	  </sheet>
	</form>
      </field>
    </record>

    <record id="view_certification_service_tree" model="ir.ui.view">
      <field name="name">certification.service.tree</field>
      <field name="model">certification.service</field>
      <field name="arch" type="xml">
	<tree>
	  <field name="name"/>
	  <field name="product_id"/>
	  <field name="lot_id"/>
	  <field name="group_id"/>
	</tree>
      </field>
    </record>

    
    <record model="ir.ui.view" id="view_certification_service_kanban">
      <field name="name">certification.service.kanban</field>
      <field name="model">certification.service</field>
      <field name="arch" type="xml">
	<kanban string="Certification Service" create="1" default_group_by="state">
	  <templates>
	    <t t-name="kanban-box">
	      <div t-attf-class="oe_kanban_card oe_kanban_global_click">
		<div class="o_kanban_card_content">
		  <field name="name"/>
		  <field name="product_id" display="full"/>
		  <field name="lot_id"  display="full"/>
		  <field name="move_line_id" display="full"/>
		  <field name="group_id"  display="full"/>
		  <!-- <div> -->
		  <!--   <span><field name="group_id"/></span> -->
		  <!--   <span><t t-esc="record.group_id.string"/></span> -->
		  <!-- </div> -->
		</div>
	      </div>
	    </t>
	  </templates>
	</kanban>
      </field>
    </record>
    
    <record id="view_certification_reading_tree" model="ir.ui.view">
      <field name="name">certification.reading.tree</field>
      <field name="model">certification.reading</field>
      <field name="arch" type="xml">
	<tree>
	  <field name="name"/>
	  <field name="reading"/>
	  <field name="service_id"/>
	</tree>
      </field>
    </record>

    <record id="view_certification_element_tree" model="ir.ui.view">
      <field name="name">certification.element.tree</field>
      <field name="model">certification.element</field>
      <field name="arch" type="xml">
	<tree>
	  <field name="name"/>
	</tree>
      </field>
    </record>

    <record id="view_certification_result_tree" model="ir.ui.view">
      <field name="name">certification.result.tree</field>
      <field name="model">certification.result</field>
      <field name="arch" type="xml">
	<tree>
	  <field name="name"/>
	  <field name="service_id"/>
	</tree>
      </field>
    </record>

    <record id="view_certification_labeled_value_tree" model="ir.ui.view">
      <field name="name">certification.labeled.value.tree</field>
      <field name="model">certification.labeled.value</field>
      <field name="arch" type="xml">
	<tree>
	  <field name="value"/>
	  <field name="lot_id"/>
	  <field name="uom_id"/>
	  <field name="element_id"/>
	</tree>
      </field>
    </record>

    <record id="view_in_house_standard_tree" model="ir.ui.view">
      <field name="name">in.house.standard.tree</field>
      <field name="model">in.house.standard</field>
      <field name="arch" type="xml">
	<tree>
	  <field name="element_id"/>
	  <field name="lot_id"/>
	  <field name="initial_reading"/>
	  <field name="subsequent"/>
	</tree>
      </field>
    </record>


    <record id="view_certification_service_search" model="ir.ui.view">
      <field name="name">certification.service.search</field>
      <field name="model">certification.service</field>
      <field name="arch" type="xml">
    	<search>
    	  <group expand="0" string="Group By">
    	    <filter string="State" domain="[]" context="{'group_by':'state'}"/>
    	  </group>
    	</search>
      </field>
    </record>

    <!-- a window action to open certification service as kanban or tree view -->
    <record id="action_certification_service_kanban" model="ir.actions.act_window">
      <field name="name">Certification Service</field>
      <field name="res_model">certification.service</field>
      <field name="view_mode">kanban,tree,form</field>
      <field name="search_view_id" ref="view_certification_service_search"/>
    </record>


    <record id="action_certification_service_tree" model="ir.actions.act_window">
      <field name="name">Certification Service</field>
      <field name="res_model">certification.service</field>
      <field name="view_mode">tree,form,kanban</field>
      <!-- <field name="search_view_id" ref="view_certification_service_search"/> -->
    </record>


    <record id="action_certification_reading_tree" model="ir.actions.act_window">
      <field name="name">Certification Reading</field>
      <field name="res_model">certification.reading</field>
      <field name="view_mode">tree,form</field>
    </record>

    
    <record id="action_certification_element_tree" model="ir.actions.act_window">
      <field name="name">Certification Element</field>
      <field name="res_model">certification.element</field>
      <field name="view_mode">tree,form</field>
    </record>

    
    <record id="action_certification_result_tree" model="ir.actions.act_window">
      <field name="name">Certification Result</field>
      <field name="res_model">certification.result</field>
      <field name="view_mode">tree,form</field>
    </record>

    <record id="action_certification_labeled_value_tree" model="ir.actions.act_window">
      <field name="name">Certification Labeled Value</field>
      <field name="res_model">certification.labeled.value</field>
      <field name="view_mode">tree,form</field>
    </record>

    <record id="action_in_house_standard_tree" model="ir.actions.act_window">
      <field name="name">In House Standard</field>
      <field name="res_model">in.house.standard</field>
      <field name="view_mode">tree,form</field>
    </record>

    <!-- Add menu items -->
    <menuitem id="menu_certification_service_app" name="Certification Service" action="action_certification_service_kanban" web_icon="fa fa-info,#2ecc71,#606060" sequence="17" active="1"/>
    <menuitem id="menu_certification_service" name="Certification Service" action="action_certification_service_tree" parent="bowman_certification.menu_certification_service_app" sequence="18" active="1"/>

    <menuitem id="menu_certification_reading" name="Readings" action="action_certification_reading_tree" parent="bowman_certification.menu_certification_service_app" sequence="19" active="1"/>

    <menuitem id="menu_certification_element" name="Elements" action="action_certification_element_tree" parent="bowman_certification.menu_certification_service_app" sequence="20" active="1"/>

    <menuitem id="menu_certification_result" name="Results" action="action_certification_result_tree" parent="bowman_certification.menu_certification_service_app" sequence="21" active="1"/>

    <menuitem id="menu_certification_labeled_value" name="Labeled Values" action="action_certification_labeled_value_tree" parent="bowman_certification.menu_certification_service_app" sequence="22" active="1"/>

    <menuitem id="menu_in_house_standard" name="In House Standards" action="action_in_house_standard_tree" parent="bowman_certification.menu_certification_service_app" sequence="23" active="1"/>


  </data>
</odoo>
